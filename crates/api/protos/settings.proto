syntax = "proto3";

package mizer.settings;

message Settings {
  repeated SettingsCategory categories = 1;
  UiSettings ui = 2;
}

message UiSettings {
  string language = 1;
  map<string, Hotkeys> hotkeys = 2;
}

message SettingsCategory {
  string title = 1;
  repeated SettingsGroup groups = 2;
}

message SettingsGroup {
  optional string title = 1;
  repeated Setting settings = 2;
}

message Setting {
  string key = 1;
  string title = 2;
  bool default_value = 3;
  oneof value {
    SelectSetting select = 4;
    BoolSetting boolean = 5;
    PathSetting path = 6;
    PathListSetting path_list = 7;
    HotkeySetting hotkey = 8;
  }
}

message UpdateSetting {
  string key = 1;
  oneof value {
    string select = 2;
    bool boolean = 3;
    string path = 4;
    PathListSetting path_list = 5;
    string hotkey = 6;
  }
}

message SelectSetting {
  string selected = 1;
  repeated SelectOption values = 2;
}

message SelectOption {
  string value = 1;
  string title = 2;
}

message BoolSetting {
  bool value = 1;
}

message PathSetting {
  string path = 1;
}

message PathListSetting {
  repeated string paths = 1;
}

message HotkeySetting {
  string combination = 1;
}

message Hotkeys {
  map<string, string> keys = 1;
}

message MidiDeviceProfiles {
  repeated MidiDeviceProfile profiles = 1;
}

message MidiDeviceProfile {
  string id = 1;
  string manufacturer = 2;
  string name = 3;
  string file_path = 4;
  repeated Error errors = 5;
}

message Error {
  string timestamp = 1;
  string message = 2;
}
